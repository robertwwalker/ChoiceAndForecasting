<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Robert W. Walker">
<meta name="dcterms.date" content="2022-11-07">

<title>Models of Choice and Forecasting - Week 10: Finishing Features, the Toolbox and Evaluation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Models of Choice and Forecasting - Week 10: Finishing Features, the Toolbox and Evaluation">
<meta name="twitter:description" content="The slides are here..">
<meta name="twitter:image" content="image.png">
<meta name="twitter:creator" content="@PieRatio">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Models of Choice and Forecasting</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/robertwwalker/ChoiceAndForecasting"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/PieRatio"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Week 10: Finishing Features, the Toolbox and Evaluation</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Robert W. Walker </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 7, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#inflation-expectations" id="toc-inflation-expectations" class="nav-link active" data-scroll-target="#inflation-expectations">Inflation Expectations</a>
  <ul class="collapse">
  <li><a href="#decompositions" id="toc-decompositions" class="nav-link" data-scroll-target="#decompositions">Decompositions</a>
  <ul class="collapse">
  <li><a href="#classical-decomposition" id="toc-classical-decomposition" class="nav-link" data-scroll-target="#classical-decomposition">Classical Decomposition</a></li>
  <li><a href="#stl-decomposition" id="toc-stl-decomposition" class="nav-link" data-scroll-target="#stl-decomposition">STL Decomposition</a></li>
  </ul></li>
  <li><a href="#principal-components" id="toc-principal-components" class="nav-link" data-scroll-target="#principal-components">Principal Components</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>The slides <a href="https://robertwwalker.github.io/xaringan/CMF-Week-10/index.html">are here.</a>.</p>
<p>Our tenth class meeting will focus on <a href="https://otexts.com/fpp3/toolbox.html">Chapter 5</a> and <a href="https://otexts.com/fpp3/judgmental.html">Chapter 6</a> of <strong>Forecasting: Principles and Practice [3rd edition]</strong>.</p>
<p>All of the data for today and for last time, including computations, can be acquired using</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">"https://github.com/robertwwalker/xaringan/raw/master/CMF-Week-9/data/FullWorkspace.RData"</span>))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">"https://github.com/robertwwalker/ChoiceAndForecasting/raw/main/posts/week-10/data/Week-10.RData"</span>))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="inflation-expectations" class="level1">
<h1>Inflation Expectations</h1>
<p>The Federal Reserve Bank of New York collects data on inflation expectations that are interesting to examine. As a part of the Survey of Consumer Expectations, these highlight consumers expected levels of inflation though the five-year expectations have only become a part of the series for 2022, <a href="https://libertystreeteconomics.newyorkfed.org/2022/10/new-sce-charts-include-a-measure-of-longer-term-inflation-expectations/">more about this here that includes a bit of summary on the data</a>. While consumers are probably not experts, it is important to note how expectations are anchored and also that question wording seems to matter, see <a href="https://www.researchgate.net/publication/236941711_The_effect_of_question_wording_on_reported_inflation_expectations">de Bruin and van der Klaauw 2012</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate); <span class="fu">library</span>(tsibble)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://www.newyorkfed.org/medialibrary/interactives/sce/sce/downloads/data/frbny-sce-data.xls"</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>destfile <span class="ot">&lt;-</span> <span class="st">"frbny_sce_data.xls"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>curl<span class="sc">::</span><span class="fu">curl_download</span>(url, destfile)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>Inflation.Expectations <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(destfile, <span class="at">sheet=</span><span class="dv">4</span>, <span class="at">skip=</span><span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">date =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">yearmonth</span>(<span class="fu">parse_date_time</span>(date, <span class="at">orders =</span> <span class="st">"%Y%m"</span>)))</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fpp3)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>Inflation.Expectations <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index=</span>date) <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(<span class="st">`</span><span class="at">Median three-year ahead expected inflation rate</span><span class="st">`</span>) <span class="sc">+</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>Inflation.Expectations<span class="sc">$</span><span class="st">`</span><span class="at">Median one-year ahead expected inflation rate</span><span class="st">`</span>, <span class="at">color=</span><span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  hrbrthemes<span class="sc">::</span><span class="fu">theme_ipsum</span>() <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">"none"</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y=</span><span class="st">"Median Inflation Expectations: 1 year (red) and 3 year (black)"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A nicer plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>Inflation.Expectations <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Variable =</span> name) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>value, <span class="at">color=</span>Variable)) <span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option=</span><span class="st">"C"</span>) <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  hrbrthemes<span class="sc">::</span><span class="fu">theme_ipsum_rc</span>() <span class="sc">+</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">"Inflation Expectations"</span>, </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">color=</span><span class="st">""</span>,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"New York Fed Inflation Expectations"</span>,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"data: https://www.newyorkfed.org/medialibrary/interactives/sce/sce/downloads/data/frbny-sce-data.xlsx"</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="decompositions" class="level2">
<h2 class="anchored" data-anchor-id="decompositions">Decompositions</h2>
<section id="classical-decomposition" class="level3">
<h3 class="anchored" data-anchor-id="classical-decomposition">Classical Decomposition</h3>
<p>The key difference between the two decompositions, and there are others, is the existence [or lack thereof] of a window. In the classical decomposition, there is almost no flexibility. The flexibility is defined by the <code>Specials</code>. In this case, there is only one and it is the seasonal period [so there are basically none].</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/Specials.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Specials for classical_decomposition</figcaption><p></p>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>Inflation.Expectations <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index=</span>date) <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">stl =</span> <span class="fu">classical_decomposition</span>(<span class="st">`</span><span class="at">Median one-year ahead expected inflation rate</span><span class="st">`</span> <span class="sc">~</span> <span class="fu">season</span>(<span class="dv">12</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">components</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>()</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="stl-decomposition" class="level3">
<h3 class="anchored" data-anchor-id="stl-decomposition">STL Decomposition</h3>
<p>The key new element to the STL decomposition is the <code>window</code> argument. Over how many time periods should the trend/season be calculated. If one wishes to average over all periods, <code>window="periodic"</code> is the necessary syntax. For the STL decomposition, there are quite a few.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/STLSpecials.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">STL Specials</figcaption><p></p>
</figure>
</div>
<p>Season and trend are fairly intuitive. The lowpass filter, less so. First, the subseries is the individual seasonal period; in this case, there are 12 subseries because we have monthly data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>Inflation.Expectations <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index=</span>date) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">STL</span>(<span class="st">`</span><span class="at">Median one-year ahead expected inflation rate</span><span class="st">`</span> <span class="sc">~</span> <span class="fu">season</span>(<span class="dv">12</span>, <span class="at">window =</span> <span class="st">"periodic"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">components</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>()</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="principal-components" class="level2">
<h2 class="anchored" data-anchor-id="principal-components">Principal Components</h2>
<p>One way of deploying the full set of features is to utilize principal components on them to determine which series are most alike in relation to the others. Letâ€™s try this with the employment data.</p>
<p>First, let me take the version of the updated employment data and subject them to the full set of features.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>employment_features <span class="ot">&lt;-</span> US.Employment.T <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">features</span>(Employed, <span class="fu">feature_set</span>(<span class="at">pkgs =</span> <span class="st">"feasts"</span>))</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, I want to take the features and subject them to principal components. There is one issue in doing this, to scale them, we will need to find the column(s) that have no implicit variation. Though there are 49 columns to the features, there are only 43 remaining columns after removing those with no variation. The <code>apply</code> part goes through and omits columns with zero variance. The <code>2</code> applies the function to columns and only keeps those with non-zero variance.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>EF <span class="ot">&lt;-</span> employment_features <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Title) <span class="sc">%&gt;%</span> .[,<span class="fu">apply</span>(., <span class="dv">2</span>, var, <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">!=</span> <span class="dv">0</span>]</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(employment_features)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(EF)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 49
[1] 43</code></pre>
</div>
</div>
<p>Now to the scaling.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>pcs <span class="ot">&lt;-</span> EF <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prcomp</span>(<span class="at">scale=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">augment</span>(EF)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>pcs<span class="sc">$</span>Title <span class="ot">&lt;-</span> employment_features<span class="sc">$</span>Title</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then I want to plot them. Unlike the example in the text, these do not have numerous categorical identifiers, I will use a plotly to get the titles of the series as the identifier to explore.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>plot1 <span class="ot">&lt;-</span> pcs <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .fittedPC1, <span class="at">y =</span> .fittedPC2, <span class="at">label =</span> Title)) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(plot1)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-a1a27a94538abd212415" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a1a27a94538abd212415">{"x":{"data":[{"x":[-1.05929088117271,10.2777222582892,1.93465822500204,-2.51279094267803,-6.98429461597502,-3.97562430241724,-4.81037436832812,-2.05934539683788,-2.87929427537183,-0.442441232329552,-0.486308411925666,1.39542735319808,0.819850419235657,1.21054612524267,1.08303473729441,-1.12835190121644,-0.406445191035359,1.0401513779777,0.520405168103449,-0.296329410648797,-0.564015261934447,1.20261445294144,0.879568201892272,-0.165295102729087,0.0447444987792681,7.48939875158273,1.84058246090865,0.70531785418456,-1.04783203791804,1.7480413143666,1.93892947663956,2.06118933322825,1.39787387618732,0.518352474367405,-0.463563459473055,3.07442720926743,2.43682956775824,2.04707975302099,5.03186808299269,-4.51165169909286,-0.106383736358236,-3.54183612489689,0.0636380575316856,0.556905880228035,-0.356559563685609,0.0622307194514153,-0.264786040095501,-0.909861391489955,-1.83708543750557,0.519144151381495,0.153571408441778,3.05276124818336,-1.86638560203441,-2.02807059709671,2.15338306229927,1.37564685806796,1.76716401962311,2.26766799819476,1.61368383380768,1.4057334985293,-3.88930306466496,4.00003145905931,0.564711445017779,0.478576167972986,-3.63792378848725,2.03850920106739,1.00271092862104,0.900779548460122,6.38354428422781,-0.117401503063162,0.139377011958889,-5.29432543988767,-4.67964336172744,0.549836600058581,-1.44307771577163,-4.07575630280092,0.448046002552548,-0.296917992020753,1.03441751922518,-4.18730164217835,0.10928839687502,-1.67260689553553,0.109016089023993,0.363355107839571,0.443763682871624,0.922774919330856,1.55421038909104,0.888706313591425,-5.34981693592635,-0.325473885406505,1.55653588330336,-1.17508975470451,0.816695681805741,1.85315816537458,2.25211652099687,1.60221577209859,6.40662337117536,-0.168370861692875,-6.09873538148341,0.24866185534876,10.0375511323479,6.86813889130784,-4.3949614990246,-0.632497838705868,-0.563372572890376,0.0579022015549081,0.128619491688095,1.38725826831164,0.0446356079652155,-0.452682708820353,1.96853708275449,1.21628019064044,1.42008554635224,-2.23315803253485,0.262541648405093,4.45999770165008,2.21503215591911,-2.09490913449943,-11.2482867495558,-5.45326189969143,-2.39169051846491,-1.80135483455051,-3.51597230533576,-1.89694636529609,-4.14204473287863,0.0190970556646352,-2.61366375811011,-0.0230369651665252,-2.23223683685872,-6.50349372432057,9.69471897608941,4.54304302402247,2.23698155718038,-1.32783204852786,-2.21511117946175,0.271935900745405,3.79020063259252,-7.85842728694954,1.15679773338967,-4.54904099583227,-1.31912349791178,2.23354410993924,-2.27814859606369,0.146228449777187,4.32460030639629,-1.22459732653608,1.60090760011499,-2.36062837237134],"y":[-0.804268094483503,7.15781778901833,5.34054916117136,0.737487982060271,5.86054592994276,1.31498356204153,0.808142349453764,0.847403347071225,0.139093978583926,2.10294843890922,-2.00734453925226,-2.9713952678957,-2.37811804496592,-3.04025623684032,-2.78902791460665,-2.39241336934098,-2.67029322152189,-2.56201694251689,-2.7652976045385,-2.02988179331546,2.18710840058983,-2.87249099521893,-2.30680064126893,-2.04822506301587,-0.895130062672673,2.87598978035746,-2.32382667394795,0.445397441691467,3.57639008995804,-2.20434623024707,-2.23975276628357,-2.35830550427815,-1.79879668806335,-1.56582334040888,-1.4553378959115,-1.31388190828513,-3.45696687259858,-1.93362265102757,3.08099593779067,-0.105249065779867,-1.71810734931442,-1.00624575753767,-1.22420925719823,-3.2283219120677,-2.64196468755166,-2.221219569446,-0.390850434372591,-0.346962695426442,-0.724822902472978,-2.17726285796888,2.30696427588345,5.08396715987796,0.0844083911900072,-1.71318153927769,4.33520487697147,6.35175373276354,3.58670489341462,5.18313445147057,6.84521752803874,1.68734730396063,5.00931437447846,0.464873861360006,-3.32007877739686,-2.63608088449829,-1.55023267489712,-3.02485400549004,-2.33641621943491,-3.06898694158582,2.86054479690891,1.79940543699517,-0.60008774096781,3.20718278023713,2.72762302451162,-0.97492191148431,1.0876606298831,0.742610100844015,-2.12306333428641,-0.446723366446506,-3.28219521862363,2.67951047821939,-1.65876210838152,0.107264362653787,-1.46247411754575,-1.45738233722082,-1.99304105702843,0.301964811854409,-1.01605593831334,-1.7032609242963,2.14143447580178,-0.821879369118414,-1.6705422834291,0.817445362826599,-2.61547476629734,-2.71858759267302,-2.84442223976388,-2.48292354134911,1.65198224080963,-0.365102903257685,-0.0655482329913079,-2.23398510269644,5.4443171332359,2.89240433673027,2.81421247431818,-0.0211775090657102,-0.0443080968392071,-0.346773743343426,-0.77591457983981,-2.12613837927086,-0.510819475574516,0.106195564790687,-2.00393409054944,-1.27492530654727,-1.1024520694861,3.3305750008991,-0.357692462037485,3.68090782811882,-1.4844065316583,2.22817665724074,2.76735857351051,3.8491360724891,-0.382551005090982,0.786689879640997,-1.2216418846443,-0.0616187340470501,3.28360634677216,-0.438467503650293,-1.15944421402711,-2.25351795437265,0.649420425503079,2.30240588825052,6.82867995531547,3.30369126206972,0.22952438512866,-1.87839494759802,-0.411100104119945,-2.8835986905216,-0.841079061090912,5.18388991870738,-2.60890823387622,2.72828745465851,-0.432383864894016,-2.05753443992111,0.565650581514306,0.335527779742277,1.63531239550642,-2.06922521647649,-2.38195373163828,-0.199279683162687],"text":[".fittedPC1:  -1.05929088<br />.fittedPC2: -0.80426809<br />Title: All Employees, Temporary Help Services",".fittedPC1:  10.27772226<br />.fittedPC2:  7.15781779<br />Title: All Employees, Total Nonfarm",".fittedPC1:   1.93465823<br />.fittedPC2:  5.34054916<br />Title: Construction",".fittedPC1:  -2.51279094<br />.fittedPC2:  0.73748798<br />Title: Construction: Construction of Buildings",".fittedPC1:  -6.98429462<br />.fittedPC2:  5.86054593<br />Title: Construction: Heavy and Civil Engineering Construction",".fittedPC1:  -3.97562430<br />.fittedPC2:  1.31498356<br />Title: Construction: Nonresidential Building",".fittedPC1:  -4.81037437<br />.fittedPC2:  0.80814235<br />Title: Construction: Nonresidential Specialty Trade Contractors",".fittedPC1:  -2.05934540<br />.fittedPC2:  0.84740335<br />Title: Construction: Residential Building",".fittedPC1:  -2.87929428<br />.fittedPC2:  0.13909398<br />Title: Construction: Residential Specialty Trade Contractors",".fittedPC1:  -0.44244123<br />.fittedPC2:  2.10294844<br />Title: Construction: Specialty Trade Contractors",".fittedPC1:  -0.48630841<br />.fittedPC2: -2.00734454<br />Title: Durable Goods",".fittedPC1:   1.39542735<br />.fittedPC2: -2.97139527<br />Title: Durable Goods: Communications Equipment",".fittedPC1:   0.81985042<br />.fittedPC2: -2.37811804<br />Title: Durable Goods: Computer and Electronic Products",".fittedPC1:   1.21054613<br />.fittedPC2: -3.04025624<br />Title: Durable Goods: Computer and Peripheral Equipment",".fittedPC1:   1.08303474<br />.fittedPC2: -2.78902791<br />Title: Durable Goods: Electrical Equipment and Appliances",".fittedPC1:  -1.12835190<br />.fittedPC2: -2.39241337<br />Title: Durable Goods: Electronic Instruments",".fittedPC1:  -0.40644519<br />.fittedPC2: -2.67029322<br />Title: Durable Goods: Fabricated Metal Products",".fittedPC1:   1.04015138<br />.fittedPC2: -2.56201694<br />Title: Durable Goods: Furniture and Related Products",".fittedPC1:   0.52040517<br />.fittedPC2: -2.76529760<br />Title: Durable Goods: Machinery",".fittedPC1:  -0.29632941<br />.fittedPC2: -2.02988179<br />Title: Durable Goods: Motor Vehicles and Parts",".fittedPC1:  -0.56401526<br />.fittedPC2:  2.18710840<br />Title: Durable Goods: Nonmetallic Mineral Products",".fittedPC1:   1.20261445<br />.fittedPC2: -2.87249100<br />Title: Durable Goods: Primary Metals",".fittedPC1:   0.87956820<br />.fittedPC2: -2.30680064<br />Title: Durable Goods: Semiconductors and Electronic Components",".fittedPC1:  -0.16529510<br />.fittedPC2: -2.04822506<br />Title: Durable Goods: Transportation Equipment",".fittedPC1:   0.04474450<br />.fittedPC2: -0.89513006<br />Title: Durable Goods: Wood Products",".fittedPC1:   7.48939875<br />.fittedPC2:  2.87598978<br />Title: Education and Health Services",".fittedPC1:   1.84058246<br />.fittedPC2: -2.32382667<br />Title: Education and Health Services: Ambulatory Health Care Services",".fittedPC1:   0.70531785<br />.fittedPC2:  0.44539744<br />Title: Education and Health Services: Child Day Care Services",".fittedPC1:  -1.04783204<br />.fittedPC2:  3.57639009<br />Title: Education and Health Services: Educational Services",".fittedPC1:   1.74804131<br />.fittedPC2: -2.20434623<br />Title: Education and Health Services: Health Care",".fittedPC1:   1.93892948<br />.fittedPC2: -2.23975277<br />Title: Education and Health Services: Health Care and Social Assistance",".fittedPC1:   2.06118933<br />.fittedPC2: -2.35830550<br />Title: Education and Health Services: Home Health Care Services",".fittedPC1:   1.39787388<br />.fittedPC2: -1.79879669<br />Title: Education and Health Services: Hospitals",".fittedPC1:   0.51835247<br />.fittedPC2: -1.56582334<br />Title: Education and Health Services: Nursing and Residential Care Facilities",".fittedPC1:  -0.46356346<br />.fittedPC2: -1.45533790<br />Title: Education and Health Services: Nursing Care Facilities",".fittedPC1:   3.07442721<br />.fittedPC2: -1.31388191<br />Title: Education and Health Services: offices of Physicians",".fittedPC1:   2.43682957<br />.fittedPC2: -3.45696687<br />Title: Education and Health Services: Outpatient Care Centers",".fittedPC1:   2.04707975<br />.fittedPC2: -1.93362265<br />Title: Education and Health Services: Social Assistance",".fittedPC1:   5.03186808<br />.fittedPC2:  3.08099594<br />Title: Financial Activities",".fittedPC1:  -4.51165170<br />.fittedPC2: -0.10524907<br />Title: Financial Activities: Commercial Banking",".fittedPC1:  -0.10638374<br />.fittedPC2: -1.71810735<br />Title: Financial Activities: Credit Intermediation and Related Activities",".fittedPC1:  -3.54183612<br />.fittedPC2: -1.00624576<br />Title: Financial Activities: Depository Credit Intermediation",".fittedPC1:   0.06363806<br />.fittedPC2: -1.22420926<br />Title: Financial Activities: Finance and Insurance",".fittedPC1:   0.55690588<br />.fittedPC2: -3.22832191<br />Title: Financial Activities: Insurance Carriers and Related Activities",".fittedPC1:  -0.35655956<br />.fittedPC2: -2.64196469<br />Title: Financial Activities: Lessors of Nonfinancial Intangible Assets",".fittedPC1:   0.06223072<br />.fittedPC2: -2.22121957<br />Title: Financial Activities: Monetary Authorities - Central Bank",".fittedPC1:  -0.26478604<br />.fittedPC2: -0.39085043<br />Title: Financial Activities: Real Estate",".fittedPC1:  -0.90986139<br />.fittedPC2: -0.34696270<br />Title: Financial Activities: Real Estate and Rental and Leasing",".fittedPC1:  -1.83708544<br />.fittedPC2: -0.72482290<br />Title: Financial Activities: Rental and Leasing Services",".fittedPC1:   0.51914415<br />.fittedPC2: -2.17726286<br />Title: Financial Activities: Securities, Commodity Contracts, Investments",".fittedPC1:   0.15357141<br />.fittedPC2:  2.30696428<br />Title: Goods-Producing",".fittedPC1:   3.05276125<br />.fittedPC2:  5.08396716<br />Title: Government",".fittedPC1:  -1.86638560<br />.fittedPC2:  0.08440839<br />Title: Government: Federal",".fittedPC1:  -2.02807060<br />.fittedPC2: -1.71318154<br />Title: Government: Federal, Except U.S. Postal Service",".fittedPC1:   2.15338306<br />.fittedPC2:  4.33520488<br />Title: Government: Local Government",".fittedPC1:   1.37564686<br />.fittedPC2:  6.35175373<br />Title: Government: Local Government Education",".fittedPC1:   1.76716402<br />.fittedPC2:  3.58670489<br />Title: Government: Local Government, Excluding Education",".fittedPC1:   2.26766800<br />.fittedPC2:  5.18313445<br />Title: Government: State Government",".fittedPC1:   1.61368383<br />.fittedPC2:  6.84521753<br />Title: Government: State Government Education",".fittedPC1:   1.40573350<br />.fittedPC2:  1.68734730<br />Title: Government: State Government, Excluding Education",".fittedPC1:  -3.88930306<br />.fittedPC2:  5.00931437<br />Title: Government: U.S. Postal Service",".fittedPC1:   4.00003146<br />.fittedPC2:  0.46487386<br />Title: Information",".fittedPC1:   0.56471145<br />.fittedPC2: -3.32007878<br />Title: Information: Broadcasting, Except Internet",".fittedPC1:   0.47857617<br />.fittedPC2: -2.63608088<br />Title: Information: Data Processing, Hosting and Related Services",".fittedPC1:  -3.63792379<br />.fittedPC2: -1.55023267<br />Title: Information: Motion Picture and Sound Recording Industries",".fittedPC1:   2.03850920<br />.fittedPC2: -3.02485401<br />Title: Information: Other Information Services",".fittedPC1:   1.00271093<br />.fittedPC2: -2.33641622<br />Title: Information: Publishing Industries, Except Internet",".fittedPC1:   0.90077955<br />.fittedPC2: -3.06898694<br />Title: Information: Telecommunications",".fittedPC1:   6.38354428<br />.fittedPC2:  2.86054480<br />Title: Leisure and Hospitality",".fittedPC1:  -0.11740150<br />.fittedPC2:  1.79940544<br />Title: Leisure and Hospitality: Accommodation",".fittedPC1:   0.13937701<br />.fittedPC2: -0.60008774<br />Title: Leisure and Hospitality: Accommodation and Food Services",".fittedPC1:  -5.29432544<br />.fittedPC2:  3.20718278<br />Title: Leisure and Hospitality: Amusements, Gambling, and Recreation",".fittedPC1:  -4.67964336<br />.fittedPC2:  2.72762302<br />Title: Leisure and Hospitality: Arts, Entertainment, and Recreation",".fittedPC1:   0.54983660<br />.fittedPC2: -0.97492191<br />Title: Leisure and Hospitality: Food Services and Drinking Places",".fittedPC1:  -1.44307772<br />.fittedPC2:  1.08766063<br />Title: Leisure and Hospitality: Museums, Historical Sites, Zoos, and Parks",".fittedPC1:  -4.07575630<br />.fittedPC2:  0.74261010<br />Title: Leisure and Hospitality: Performing Arts and Spectator Sports",".fittedPC1:   0.44804600<br />.fittedPC2: -2.12306333<br />Title: Manufacturing",".fittedPC1:  -0.29691799<br />.fittedPC2: -0.44672337<br />Title: Mining and Logging",".fittedPC1:   1.03441752<br />.fittedPC2: -3.28219522<br />Title: Mining and Logging: Coal Mining",".fittedPC1:  -4.18730164<br />.fittedPC2:  2.67951048<br />Title: Mining and Logging: Logging",".fittedPC1:   0.10928840<br />.fittedPC2: -1.65876211<br />Title: Mining and Logging: Mining",".fittedPC1:  -1.67260690<br />.fittedPC2:  0.10726436<br />Title: Mining and Logging: Mining, Except Oil and Gas",".fittedPC1:   0.10901609<br />.fittedPC2: -1.46247412<br />Title: Mining and Logging: Oil and Gas Extraction",".fittedPC1:   0.36335511<br />.fittedPC2: -1.45738234<br />Title: Mining and Logging: Support Activities for Mining",".fittedPC1:   0.44376368<br />.fittedPC2: -1.99304106<br />Title: Miscellaneous Durable Goods Manufacturing",".fittedPC1:   0.92277492<br />.fittedPC2:  0.30196481<br />Title: Nondurable Goods",".fittedPC1:   1.55421039<br />.fittedPC2: -1.01605594<br />Title: Nondurable Goods: Apparel",".fittedPC1:   0.88870631<br />.fittedPC2: -1.70326092<br />Title: Nondurable Goods: Chemicals",".fittedPC1:  -5.34981694<br />.fittedPC2:  2.14143448<br />Title: Nondurable Goods: Food Manufacturing",".fittedPC1:  -0.32547389<br />.fittedPC2: -0.82187937<br />Title: Nondurable Goods: Miscellaneous Nondurable Goods Manufacturing",".fittedPC1:   1.55653588<br />.fittedPC2: -1.67054228<br />Title: Nondurable Goods: Paper and Paper Products",".fittedPC1:  -1.17508975<br />.fittedPC2:  0.81744536<br />Title: Nondurable Goods: Petroleum and Coal Products",".fittedPC1:   0.81669568<br />.fittedPC2: -2.61547477<br />Title: Nondurable Goods: Plastics and Rubber Products",".fittedPC1:   1.85315817<br />.fittedPC2: -2.71858759<br />Title: Nondurable Goods: Printing and Related Support Activities",".fittedPC1:   2.25211652<br />.fittedPC2: -2.84442224<br />Title: Nondurable Goods: Textile Mills",".fittedPC1:   1.60221577<br />.fittedPC2: -2.48292354<br />Title: Nondurable Goods: Textile Product Mills",".fittedPC1:   6.40662337<br />.fittedPC2:  1.65198224<br />Title: Other Services",".fittedPC1:  -0.16837086<br />.fittedPC2: -0.36510290<br />Title: Other Services: Membership Associations and Organizations",".fittedPC1:  -6.09873538<br />.fittedPC2: -0.06554823<br />Title: Other Services: Personal and Laundry Services",".fittedPC1:   0.24866186<br />.fittedPC2: -2.23398510<br />Title: Other Services: Repair and Maintenance",".fittedPC1:  10.03755113<br />.fittedPC2:  5.44431713<br />Title: Private Service-Providing",".fittedPC1:   6.86813889<br />.fittedPC2:  2.89240434<br />Title: Professional and Business Services",".fittedPC1:  -4.39496150<br />.fittedPC2:  2.81421247<br />Title: Professional and Business Services: Accounting and Bookkeeping Services",".fittedPC1:  -0.63249784<br />.fittedPC2: -0.02117751<br />Title: Professional and Business Services: Administrative and Support Services",".fittedPC1:  -0.56337257<br />.fittedPC2: -0.04430810<br />Title: Professional and Business Services: Administrative and Waste Services",".fittedPC1:   0.05790220<br />.fittedPC2: -0.34677374<br />Title: Professional and Business Services: Architectural and Engineering Services",".fittedPC1:   0.12861949<br />.fittedPC2: -0.77591458<br />Title: Professional and Business Services: Business Support Services",".fittedPC1:   1.38725827<br />.fittedPC2: -2.12613838<br />Title: Professional and Business Services: Computer Systems Design and Related Services",".fittedPC1:   0.04463561<br />.fittedPC2: -0.51081948<br />Title: Professional and Business Services: Employment Services",".fittedPC1:  -0.45268271<br />.fittedPC2:  0.10619556<br />Title: Professional and Business Services: Legal Services",".fittedPC1:   1.96853708<br />.fittedPC2: -2.00393409<br />Title: Professional and Business Services: Management and Technical Consulting Services",".fittedPC1:   1.21628019<br />.fittedPC2: -1.27492531<br />Title: Professional and Business Services: Management of Companies and Enterprises",".fittedPC1:   1.42008555<br />.fittedPC2: -1.10245207<br />Title: Professional and Business Services: Professional and Technical Services",".fittedPC1:  -2.23315803<br />.fittedPC2:  3.33057500<br />Title: Professional and Business Services: Services to Buildings and Dwellings",".fittedPC1:   0.26254165<br />.fittedPC2: -0.35769246<br />Title: Professional and Business Services: Waste Management and Remediation Services",".fittedPC1:   4.45999770<br />.fittedPC2:  3.68090783<br />Title: Retail Trade",".fittedPC1:   2.21503216<br />.fittedPC2: -1.48440653<br />Title: Retail Trade: Automobile Dealers",".fittedPC1:  -2.09490913<br />.fittedPC2:  2.22817666<br />Title: Retail Trade: Building Material and Garden Supply Stores",".fittedPC1: -11.24828675<br />.fittedPC2:  2.76735857<br />Title: Retail Trade: Clothing and Clothing Accessories Stores",".fittedPC1:  -5.45326190<br />.fittedPC2:  3.84913607<br />Title: Retail Trade: Department Stores (DISCONTINUED)",".fittedPC1:  -2.39169052<br />.fittedPC2: -0.38255101<br />Title: Retail Trade: Electronics and Appliance Stores",".fittedPC1:  -1.80135483<br />.fittedPC2:  0.78668988<br />Title: Retail Trade: Food and Beverage Stores",".fittedPC1:  -3.51597231<br />.fittedPC2: -1.22164188<br />Title: Retail Trade: Furniture and Home Furnishings Stores",".fittedPC1:  -1.89694637<br />.fittedPC2: -0.06161873<br />Title: Retail Trade: Gasoline Stations",".fittedPC1:  -4.14204473<br />.fittedPC2:  3.28360635<br />Title: Retail Trade: General Merchandise Stores",".fittedPC1:   0.01909706<br />.fittedPC2: -0.43846750<br />Title: Retail Trade: Health and Personal Care Stores",".fittedPC1:  -2.61366376<br />.fittedPC2: -1.15944421<br />Title: Retail Trade: Miscellaneous Store Retailers",".fittedPC1:  -0.02303697<br />.fittedPC2: -2.25351795<br />Title: Retail Trade: Motor Vehicle and Parts Dealers",".fittedPC1:  -2.23223684<br />.fittedPC2:  0.64942043<br />Title: Retail Trade: Nonstore Retailers",".fittedPC1:  -6.50349372<br />.fittedPC2:  2.30240589<br />Title: Retail Trade: Sporting Goods, Hobby, Book, and Music Stores",".fittedPC1:   9.69471898<br />.fittedPC2:  6.82867996<br />Title: Total Private",".fittedPC1:   4.54304302<br />.fittedPC2:  3.30369126<br />Title: Trade, Transportation, and Utilities",".fittedPC1:   2.23698156<br />.fittedPC2:  0.22952439<br />Title: Transportation and Warehousing",".fittedPC1:  -1.32783205<br />.fittedPC2: -1.87839495<br />Title: Transportation and Warehousing: Air Transportation",".fittedPC1:  -2.21511118<br />.fittedPC2: -0.41110010<br />Title: Transportation and Warehousing: Couriers and Messengers",".fittedPC1:   0.27193590<br />.fittedPC2: -2.88359869<br />Title: Transportation and Warehousing: Pipeline Transportation",".fittedPC1:   3.79020063<br />.fittedPC2: -0.84107906<br />Title: Transportation and Warehousing: Rail Transportation",".fittedPC1:  -7.85842729<br />.fittedPC2:  5.18388992<br />Title: Transportation and Warehousing: Scenic and Sightseeing Transportation",".fittedPC1:   1.15679773<br />.fittedPC2: -2.60890823<br />Title: Transportation and Warehousing: Support Activities for Transportation",".fittedPC1:  -4.54904100<br />.fittedPC2:  2.72828745<br />Title: Transportation and Warehousing: Transit and Ground Passenger Transportation",".fittedPC1:  -1.31912350<br />.fittedPC2: -0.43238386<br />Title: Transportation and Warehousing: Truck Transportation",".fittedPC1:   2.23354411<br />.fittedPC2: -2.05753444<br />Title: Transportation and Warehousing: Warehousing and Storage",".fittedPC1:  -2.27814860<br />.fittedPC2:  0.56565058<br />Title: Transportation and Warehousing: Water Transportation",".fittedPC1:   0.14622845<br />.fittedPC2:  0.33552778<br />Title: Utilities",".fittedPC1:   4.32460031<br />.fittedPC2:  1.63531240<br />Title: Wholesale Trade",".fittedPC1:  -1.22459733<br />.fittedPC2: -2.06922522<br />Title: Wholesale Trade: Durable Goods",".fittedPC1:   1.60090760<br />.fittedPC2: -2.38195373<br />Title: Wholesale Trade: Electronic Markets and Agents and Brokers",".fittedPC1:  -2.36062837<br />.fittedPC2: -0.19927968<br />Title: Wholesale Trade: Nondurable Goods"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-12.3245871999481,11.3540227086814],"tickmode":"array","ticktext":["-10","-5","0","5","10"],"tickvals":[-10,-5,1.77635683940025e-15,5,10],"categoryorder":"array","categoryarray":["-10","-5","0","5","10"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":".fittedPC1","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3.98770610567943,7.68855702209918],"tickmode":"array","ticktext":["-2","0","2","4","6"],"tickvals":[-2,-4.44089209850063e-16,2,4,6],"categoryorder":"array","categoryarray":["-2","0","2","4","6"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":".fittedPC2","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"8c6756ba2084":{"x":{},"y":{},"label":{},"type":"scatter"}},"cur_data":"8c6756ba2084","visdat":{"8c6756ba2084":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The common question exposed by principal components is expressed here. What are these components actually measuring? That is largely unknown except that the first principal component is the strongest axis of differentiation for the data. But what features are included in it? That is <code>black box</code>ed.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>